{"ast":null,"code":"import _objectSpread from \"D:\\\\ReactJs-Training\\\\e-handy-store-react -Redux\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport * as actionTypeName from './action-type-names';\nimport { storeProducts, detailProduct } from '../data';\nimport { store } from '../index'; //we need \"store\" to use \"getState\" outside of \"return (dispatch, getState)=>{}\"\n\nexport const asyn_setProducts = () => {\n  return dispatch => {\n    let tempProducts = [];\n    storeProducts.forEach(item => {\n      const singleItem = _objectSpread({}, item);\n\n      tempProducts = [...tempProducts, singleItem];\n    });\n    dispatch(setProducts(tempProducts));\n  };\n};\n\nconst setProducts = products => {\n  return {\n    type: actionTypeName.SETPRODUCTS,\n    products: products\n  };\n}; ////////////////////////////////////////////////\n\n\nconst getItem = id => {\n  const product = store.getState().products.find(product => {\n    return product.id === id;\n  });\n  console.log('product', product);\n  return product;\n};\n\nexport const handelDetail = id => {\n  return {\n    type: actionTypeName.HANDEL_DETAIL,\n    detailProduct: getItem(id)\n  };\n}; //////////////////////////////////////////////////\n\nexport const asyn_addToCart = id => {\n  return dispatch => {\n    let tempProducts = [...store.getState().products];\n    let index = tempProducts.findIndex(product => product.id === id);\n    let product = tempProducts[index];\n    product.inCart = true;\n    product.count = 1;\n    const tempPrice = product.price;\n    product.total = tempPrice;\n    dispatch(addToCart(tempProducts, product));\n    dispatch(addTotal());\n  };\n};\n\nconst addToCart = (tempProducts, product) => {\n  return {\n    type: actionTypeName.ADD_TO_CART,\n    tempProducts: tempProducts,\n    product: product //this.setState({products:tempProducts, cart:[...this.state.cart, product]}, ()=>{this.addTotal()} );\n\n  };\n};\n\nexport const addTotal = () => {\n  let subTotal = 0;\n\n  for (let i = 0; i < store.getState().cart.length; i++) {\n    subTotal += store.getState().cart[i].total;\n  } //console.log('subTotal:'+subTotal);\n\n\n  let tempTax = subTotal * 0.1;\n  tempTax = parseFloat(tempTax.toFixed(2));\n  let total = subTotal + tempTax;\n  return {\n    type: actionTypeName.ADD_TOTAL,\n    cartSubtotal: subTotal,\n    cartTax: tempTax,\n    cartTotal: total\n  };\n}; ///////////////////////////////////////////////////////////\n\nexport const openModal = id => {\n  const product = getItem(id);\n  return {\n    type: actionTypeName.OPEN_MODAL,\n    modalProduct: product,\n    modalOpen: true\n  };\n};\nexport const closeModal = () => {\n  return {\n    type: actionTypeName.CLOSE_MODAL,\n    modalOpen: false\n  };\n}; //////////////////////////////////////////////////////////","map":{"version":3,"sources":["D:\\ReactJs-Training\\e-handy-store-react -Redux\\src\\store\\actions.js"],"names":["actionTypeName","storeProducts","detailProduct","store","asyn_setProducts","dispatch","tempProducts","forEach","item","singleItem","setProducts","products","type","SETPRODUCTS","getItem","id","product","getState","find","console","log","handelDetail","HANDEL_DETAIL","asyn_addToCart","index","findIndex","inCart","count","tempPrice","price","total","addToCart","addTotal","ADD_TO_CART","subTotal","i","cart","length","tempTax","parseFloat","toFixed","ADD_TOTAL","cartSubtotal","cartTax","cartTotal","openModal","OPEN_MODAL","modalProduct","modalOpen","closeModal","CLOSE_MODAL"],"mappings":"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","sourcesContent":["import * as actionTypeName from './action-type-names';\r\nimport {storeProducts, detailProduct} from '../data';\r\nimport {store} from '../index';//we need \"store\" to use \"getState\" outside of \"return (dispatch, getState)=>{}\"\r\n\r\nexport const asyn_setProducts=()=>{\r\n    return (dispatch)=>{\r\n        let tempProducts=[];\r\n        storeProducts.forEach((item)=>{\r\n            const singleItem={...item};\r\n            tempProducts=[...tempProducts, singleItem];\r\n        });\r\n\r\n        dispatch(setProducts(tempProducts));\r\n    }\r\n};\r\nconst setProducts=(products)=>{\r\n    return {\r\n        type:actionTypeName.SETPRODUCTS,\r\n        products:products\r\n    }\r\n};\r\n////////////////////////////////////////////////\r\n\r\nconst getItem=(id)=>{\r\n    const product= store.getState().products.find((product) => {\r\n        return product.id === id;\r\n    });\r\n    console.log('product', product);\r\n    return product;\r\n};\r\nexport const handelDetail=(id)=>{\r\n    return {\r\n        type:actionTypeName.HANDEL_DETAIL,\r\n        detailProduct:getItem(id)\r\n    };\r\n};\r\n//////////////////////////////////////////////////\r\nexport const asyn_addToCart=(id)=>{\r\n    return (dispatch)=>{\r\n        let tempProducts=[...store.getState().products];\r\n        let index=tempProducts.findIndex(product=>product.id===id);\r\n        let product=tempProducts[index];\r\n\r\n        product.inCart=true;\r\n        product.count=1;\r\n        const tempPrice=product.price;\r\n        product.total=tempPrice;\r\n        dispatch(addToCart(tempProducts, product));\r\n        dispatch(addTotal());\r\n    };\r\n};\r\nconst  addToCart=(tempProducts, product)=>{\r\n    return {\r\n        type:actionTypeName.ADD_TO_CART,\r\n        tempProducts:tempProducts,\r\n        product:product\r\n    }\r\n    //this.setState({products:tempProducts, cart:[...this.state.cart, product]}, ()=>{this.addTotal()} );\r\n};\r\nexport const addTotal=()=>{\r\n    let subTotal=0;\r\n    for(let i=0;i<store.getState().cart.length;i++){\r\n        subTotal +=store.getState().cart[i].total;\r\n    }\r\n    //console.log('subTotal:'+subTotal);\r\n    let tempTax=subTotal*0.1;\r\n    tempTax=parseFloat(tempTax.toFixed(2));\r\n\r\n    let total=subTotal+tempTax;\r\n\r\n    return {\r\n        type:actionTypeName.ADD_TOTAL,\r\n        cartSubtotal:subTotal,\r\n        cartTax:tempTax,\r\n        cartTotal:total\r\n    };\r\n};\r\n\r\n///////////////////////////////////////////////////////////\r\nexport const openModal=(id)=>{\r\n    const product=getItem(id);\r\n    return {\r\n        type:actionTypeName.OPEN_MODAL,\r\n        modalProduct:product,\r\n        modalOpen:true\r\n    };\r\n};\r\nexport const closeModal=()=>{\r\n    return {\r\n        type:actionTypeName.CLOSE_MODAL,\r\n        modalOpen:false\r\n    };\r\n};\r\n//////////////////////////////////////////////////////////\r\n"]},"metadata":{},"sourceType":"module"}