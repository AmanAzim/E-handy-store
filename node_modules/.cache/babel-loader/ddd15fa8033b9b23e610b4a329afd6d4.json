{"ast":null,"code":"import * as actionTypeName from './action-type-names';\nimport { storeProducts, detailProduct } from '../data';\nimport { store } from '../index'; //we need \"store\" to use \"getState\" outside of \"return (dispatch, getState)=>{}\"\n\nimport axios from 'axios'; //////////////////////////////////////////////////////////\n\nexport const asyn_setProducts = () => {\n  return dispatch => {\n    let serverProducts = [];\n    axios.get('https://e-handy-store.firebaseio.com/storeProducts.json').then(res => {\n      serverProducts = res.data;\n      console.log('serveradata', serverProducts);\n      dispatch(setProducts(serverProducts));\n    }).catch(err => console.log(err));\n    /*\r\n    let tempProducts=[];\r\n    storeProducts.forEach((item)=>{\r\n        const singleItem={...item};\r\n        tempProducts=[...tempProducts, singleItem];\r\n    });\r\n    console.log('localData',tempProducts);\r\n    console.log('set_product');\r\n      */\n  };\n};\n\nconst setProducts = products => {\n  return {\n    type: actionTypeName.SETPRODUCTS,\n    products: products\n  };\n}; //////////////////////////////////////////////////////////\n\n\nconst getItem = id => {\n  const product = store.getState().products.find(product => {\n    return product.id === id;\n  });\n  return product;\n};\n\nexport const handelDetail = id => {\n  return {\n    type: actionTypeName.HANDEL_DETAIL,\n    detailProduct: getItem(id)\n  };\n}; /////////////////////////////////////////////////////////\n\nexport const asyn_addToCart = id => {\n  return dispatch => {\n    let tempProducts = [...store.getState().products];\n    let index = tempProducts.findIndex(product => product.id === id);\n    let product = tempProducts[index];\n    product.inCart = true;\n    product.count = 1;\n    product.total = product.price;\n    console.log('tempProducts', tempProducts);\n    return new Promise(resolve => {\n      dispatch(addToCart(tempProducts, product)); //resolve(dispatch(addToCart(tempProducts, product)))\n\n      resolve(dispatch(addTotal()));\n    }); //.then(()=>dispatch(addTotal()));\n  };\n};\n\nconst addToCart = (tempProducts, product) => {\n  return {\n    type: actionTypeName.ADD_TO_CART,\n    tempProducts: tempProducts,\n    product: product //this.setState({products:tempProducts, cart:[...this.state.cart, product]}, ()=>{this.addTotal()} );\n\n  };\n};\n\nexport const addTotal = () => {\n  let subTotal = 0;\n\n  for (let i = 0; i < store.getState().cart.length; i++) {\n    subTotal += store.getState().cart[i].total;\n  }\n\n  let tempTax = subTotal * 0.1;\n  tempTax = parseFloat(tempTax.toFixed(2));\n  let total = subTotal + tempTax;\n  return {\n    type: actionTypeName.ADD_TOTAL,\n    cartSubtotal: subTotal,\n    cartTax: tempTax,\n    cartTotal: total\n  };\n};\nexport const asyn_increment = id => {\n  let tempCart = [...store.getState().cart];\n  let index = tempCart.findIndex(item => item.id === id);\n  let product = tempCart[index];\n  product.count++;\n  product.total += product.price;\n  return dispatch => {\n    //1st way of creating Promise\n    let p1 = new Promise(resolve => {\n      resolve(dispatch(increment(tempCart)));\n    });\n    p1.then(() => dispatch(addTotal())); // dispatch(increment(tempCart));\n    //dispatch(addTotal());\n  };\n};\n\nconst increment = tempCart => {\n  return {\n    type: actionTypeName.INCREMENT,\n    cart: tempCart\n  };\n};\n\nexport const asyn_decrement = id => {\n  return dispatch => {\n    let tempCart = [...store.getState().cart];\n    let index = tempCart.findIndex(item => item.id === id);\n    let product = tempCart[index];\n    product.count--;\n    product.total -= product.price;\n\n    if (product.count <= 0) {\n      /* let tempProducts=[...store.getState().products];\r\n       let index=tempProducts.findIndex(item=>item.id===id);\r\n       let product=tempProducts[index];\r\n         product.inCart=false;\r\n       product.count=0;\r\n       product.total=0;\r\n         let tempCart=store.getState().cart.filter(item=>item.id!==id);\r\n         dispatch(removeItem(tempProducts, tempCart));\r\n       dispatch(addTotal()); */\n      dispatch(asyn_removeItem(id));\n    } else {\n      //2nd way of creating Promise\n      return new Promise(resolve => {\n        resolve(dispatch(decrement(tempCart)));\n      }).then(() => dispatch(addTotal())); //dispatch(decrement(tempCart));\n      //dispatch(addTotal());\n    }\n  };\n};\n\nconst decrement = tempCart => {\n  return {\n    type: actionTypeName.DECREMENT,\n    cart: tempCart\n  };\n}; ///////////////////////////////////////////////////////////\n\n\nexport const asyn_removeItem = id => {\n  return dispatch => {\n    let tempProducts = [...store.getState().products];\n    let index = tempProducts.findIndex(item => item.id === id);\n    let product = tempProducts[index];\n    product.inCart = false;\n    product.count = 0;\n    product.total = 0;\n    let tempCart = store.getState().cart.filter(item => item.id !== id); //dispatch(removeItem(tempProducts, tempCart));\n    //dispatch(addTotal());\n\n    return new Promise(resolve => {\n      resolve(dispatch(removeItem(tempProducts, tempCart)));\n    }).then(() => dispatch(addTotal()));\n  };\n};\n\nconst removeItem = (tempProducts, tempCart) => {\n  return {\n    type: actionTypeName.REMOVE_ITEM,\n    products: tempProducts,\n    cart: tempCart\n  };\n};\n\nexport const clearCart = () => {\n  let tempProducts = [...store.getState().products];\n  tempProducts.map(item => {\n    item.inCart = false;\n    item.count = 0;\n    item.total = 0;\n  });\n  return {\n    type: actionTypeName.CLEAR_CART,\n    products: tempProducts,\n    cartSubtotal: 0,\n    cartTax: 0,\n    cartTotal: 0,\n    cart: []\n  };\n}; ///////////////////////////////////////////////////////////\n\nexport const openModal = id => {\n  const product = getItem(id);\n  return {\n    type: actionTypeName.OPEN_MODAL,\n    modalProduct: product,\n    modalOpen: true\n  };\n};\nexport const closeModal = () => {\n  return {\n    type: actionTypeName.CLOSE_MODAL,\n    modalOpen: false\n  };\n}; //////////////////////////////////////////////////////////","map":{"version":3,"sources":["D:\\ReactJs-Training\\e-handy-store-react -Redux\\src\\store\\actions.js"],"names":["actionTypeName","storeProducts","detailProduct","store","axios","asyn_setProducts","dispatch","serverProducts","get","then","res","data","console","log","setProducts","catch","err","products","type","SETPRODUCTS","getItem","id","product","getState","find","handelDetail","HANDEL_DETAIL","asyn_addToCart","tempProducts","index","findIndex","inCart","count","total","price","Promise","resolve","addToCart","addTotal","ADD_TO_CART","subTotal","i","cart","length","tempTax","parseFloat","toFixed","ADD_TOTAL","cartSubtotal","cartTax","cartTotal","asyn_increment","tempCart","item","p1","increment","INCREMENT","asyn_decrement","asyn_removeItem","decrement","DECREMENT","filter","removeItem","REMOVE_ITEM","clearCart","map","CLEAR_CART","openModal","OPEN_MODAL","modalProduct","modalOpen","closeModal","CLOSE_MODAL"],"mappings":"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","sourcesContent":["import * as actionTypeName from './action-type-names';\r\nimport {storeProducts, detailProduct} from '../data';\r\nimport {store} from '../index';//we need \"store\" to use \"getState\" outside of \"return (dispatch, getState)=>{}\"\r\nimport axios from 'axios';\r\n\r\n//////////////////////////////////////////////////////////\r\nexport const asyn_setProducts=()=>{\r\n    return (dispatch)=>{\r\n        let serverProducts=[];\r\n\r\n        axios.get('https://e-handy-store.firebaseio.com/storeProducts.json')\r\n            .then(res=>{\r\n                serverProducts=res.data;\r\n                console.log('serveradata',serverProducts);\r\n                dispatch(setProducts(serverProducts));\r\n            }).catch(err=>console.log(err));\r\n        /*\r\n        let tempProducts=[];\r\n        storeProducts.forEach((item)=>{\r\n            const singleItem={...item};\r\n            tempProducts=[...tempProducts, singleItem];\r\n        });\r\n        console.log('localData',tempProducts);\r\n        console.log('set_product');\r\n\r\n        */\r\n    }\r\n};\r\nconst setProducts=(products)=>{\r\n    return {\r\n        type:actionTypeName.SETPRODUCTS,\r\n        products:products\r\n    }\r\n};\r\n//////////////////////////////////////////////////////////\r\n\r\nconst getItem=(id)=>{\r\n    const product= store.getState().products.find((product) => {\r\n        return product.id === id;\r\n    });\r\n\r\n    return product;\r\n};\r\nexport const handelDetail=(id)=>{\r\n    return {\r\n        type:actionTypeName.HANDEL_DETAIL,\r\n        detailProduct:getItem(id)\r\n    };\r\n};\r\n/////////////////////////////////////////////////////////\r\nexport const asyn_addToCart=(id)=>{\r\n    return (dispatch)=>{\r\n        let tempProducts=[...store.getState().products];\r\n        let index=tempProducts.findIndex(product=>product.id===id);\r\n        let product=tempProducts[index];\r\n\r\n        product.inCart=true;\r\n        product.count=1;\r\n        product.total=product.price;\r\n        console.log('tempProducts',tempProducts);\r\n\r\n        return new Promise((resolve)=>{\r\n            dispatch(addToCart(tempProducts, product))\r\n           //resolve(dispatch(addToCart(tempProducts, product)))\r\n            resolve(dispatch(addTotal()))\r\n        })\r\n            //.then(()=>dispatch(addTotal()));\r\n    };\r\n};\r\nconst  addToCart=(tempProducts, product)=>{\r\n    return {\r\n        type:actionTypeName.ADD_TO_CART,\r\n        tempProducts:tempProducts,\r\n        product:product\r\n    }\r\n    //this.setState({products:tempProducts, cart:[...this.state.cart, product]}, ()=>{this.addTotal()} );\r\n};\r\nexport const addTotal=()=>{\r\n    let subTotal=0;\r\n    for(let i=0;i<store.getState().cart.length;i++){\r\n        subTotal +=store.getState().cart[i].total;\r\n    }\r\n\r\n    let tempTax=subTotal*0.1;\r\n    tempTax=parseFloat(tempTax.toFixed(2));\r\n\r\n    let total=subTotal+tempTax;\r\n\r\n    return {\r\n        type:actionTypeName.ADD_TOTAL,\r\n        cartSubtotal:subTotal,\r\n        cartTax:tempTax,\r\n        cartTotal:total\r\n    };\r\n};\r\n\r\nexport const asyn_increment=(id)=>{\r\n\r\n    let tempCart=[...store.getState().cart];\r\n    let index=tempCart.findIndex(item=>item.id===id);\r\n    let product=tempCart[index];\r\n\r\n    product.count++;\r\n    product.total+=product.price;\r\n\r\n    return (dispatch)=>{\r\n        //1st way of creating Promise\r\n        let p1= new Promise((resolve)=>{\r\n            resolve(dispatch(increment(tempCart)))\r\n        });\r\n        p1.then(()=>dispatch(addTotal()));\r\n       // dispatch(increment(tempCart));\r\n        //dispatch(addTotal());\r\n    }\r\n};\r\nconst increment=(tempCart)=>{\r\n    return {\r\n        type:actionTypeName.INCREMENT,\r\n        cart:tempCart\r\n    }\r\n};\r\nexport const asyn_decrement=(id)=>{\r\n    return (dispatch)=>{\r\n        let tempCart=[...store.getState().cart];\r\n        let index=tempCart.findIndex(item=>item.id===id);\r\n        let product=tempCart[index];\r\n\r\n        product.count--;\r\n        product.total-=product.price;\r\n\r\n        if(product.count<=0){\r\n            /* let tempProducts=[...store.getState().products];\r\n             let index=tempProducts.findIndex(item=>item.id===id);\r\n             let product=tempProducts[index];\r\n\r\n             product.inCart=false;\r\n             product.count=0;\r\n             product.total=0;\r\n\r\n             let tempCart=store.getState().cart.filter(item=>item.id!==id);\r\n\r\n             dispatch(removeItem(tempProducts, tempCart));\r\n             dispatch(addTotal()); */\r\n             dispatch(asyn_removeItem(id))\r\n        } else {\r\n            //2nd way of creating Promise\r\n            return new Promise((resolve)=>{\r\n                resolve(dispatch(decrement(tempCart)))\r\n            }).then(()=>dispatch(addTotal()));\r\n            //dispatch(decrement(tempCart));\r\n            //dispatch(addTotal());\r\n        }\r\n    };\r\n};\r\nconst decrement=(tempCart)=>{\r\n    return {\r\n        type:actionTypeName.DECREMENT,\r\n        cart:tempCart\r\n    }\r\n};\r\n///////////////////////////////////////////////////////////\r\nexport const asyn_removeItem=(id)=>{\r\n    return (dispatch)=>{\r\n        let tempProducts=[...store.getState().products];\r\n        let index=tempProducts.findIndex(item=>item.id===id);\r\n        let product=tempProducts[index];\r\n\r\n        product.inCart=false;\r\n        product.count=0;\r\n        product.total=0;\r\n\r\n        let tempCart=store.getState().cart.filter(item=>item.id!==id);\r\n\r\n        //dispatch(removeItem(tempProducts, tempCart));\r\n        //dispatch(addTotal());\r\n        return new Promise(resolve => {\r\n            resolve(dispatch(removeItem(tempProducts, tempCart)));\r\n        }).then(()=>dispatch(addTotal()))\r\n    }\r\n};\r\nconst removeItem=(tempProducts, tempCart)=>{\r\n    return {\r\n        type:actionTypeName.REMOVE_ITEM,\r\n        products:tempProducts,\r\n        cart:tempCart\r\n    };\r\n};\r\n\r\n\r\nexport const clearCart=()=>{\r\n    let tempProducts=[...store.getState().products];\r\n    tempProducts.map(item=>{\r\n        item.inCart=false;\r\n        item.count=0;\r\n        item.total=0;\r\n    });\r\n\r\n    return {\r\n        type:actionTypeName.CLEAR_CART,\r\n        products:tempProducts,\r\n        cartSubtotal:0,\r\n        cartTax:0,\r\n        cartTotal:0,\r\n        cart:[]\r\n    }\r\n};\r\n///////////////////////////////////////////////////////////\r\nexport const openModal=(id)=>{\r\n    const product=getItem(id);\r\n    return {\r\n        type:actionTypeName.OPEN_MODAL,\r\n        modalProduct:product,\r\n        modalOpen:true\r\n    };\r\n};\r\nexport const closeModal=()=>{\r\n    return {\r\n        type:actionTypeName.CLOSE_MODAL,\r\n        modalOpen:false\r\n    };\r\n};\r\n//////////////////////////////////////////////////////////\r\n\r\n"]},"metadata":{},"sourceType":"module"}